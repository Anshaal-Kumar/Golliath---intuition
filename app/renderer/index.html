<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Twin Intelligence Platform</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">ğŸ¤–</div>
                <h1>Digital Twin Intelligence</h1>
                <span class="version">v1.0.0</span>
            </div>
            <div class="status-section">
                <div class="status-indicator" id="serverStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">Connecting...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="app-layout">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="nav-section">
                <button class="nav-button active" data-page="dashboard">
                    ğŸ“Š Dashboard
                </button>
                <button class="nav-button" data-page="ingestion">
                    ğŸ“¥ Data Import
                </button>
                <button class="nav-button" data-page="analysis">
                    ğŸ§  AI Analysis
                </button>
                <button class="nav-button" data-page="ontology">
                    ğŸ”— Knowledge Graph
                </button>
                <button class="nav-button" data-page="simulations">
                    ğŸ”® Simulations
                </button>
                <button class="nav-button" data-page="chat">
                    ğŸ’¬ AI Chat
                </button>
            </div>

            <div class="system-stats">
                <h3>System Status</h3>
                <div class="stat-item">
                    <span>Records:</span> <span id="totalRecords">0</span>
                </div>
                <div class="stat-item">
                    <span>Models:</span> <span id="totalModels">0</span>
                </div>
                <div class="stat-item">
                    <span>Entities:</span> <span id="totalEntities">0</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div class="page" id="dashboard" style="display: block;">
                <div class="page-header">
                    <h2>ğŸ  Dashboard</h2>
                    <p>AI Digital Twin Intelligence Platform</p>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>ğŸ“Š Quick Stats</h3>
                        <div class="metric-grid">
                            <div class="metric-item">
                                <div class="metric-value" id="dashRecords">0</div>
                                <div class="metric-label">Records</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" id="dashFeatures">0</div>
                                <div class="metric-label">Features</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" id="dashModels">0</div>
                                <div class="metric-label">Models</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" id="dashRelationships">0</div>
                                <div class="metric-label">Relationships</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h3>ğŸš€ Quick Actions</h3>
                        <div class="quick-actions">
                            <button class="action-button" onclick="goToPage('ingestion')">
                                ğŸ“¥ Import Data
                            </button>
                            <button class="action-button" onclick="goToPage('analysis')">
                                ğŸ§  Run Analysis
                            </button>
                            <button class="action-button" onclick="goToPage('simulations')">
                                ğŸ”® Build Model
                            </button>
                            <button class="action-button" onclick="goToPage('chat')">
                                ğŸ’¬ Ask AI
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Ingestion Page -->
            <div class="page" id="ingestion" style="display: none;">
                <div class="page-header">
                    <h2>ğŸ“¥ Data Import</h2>
                    <p>Import CSV files for analysis</p>
                </div>

                <div class="content-card">
                    <h3>ğŸ“ Upload CSV File</h3>
                    <div class="upload-zone" id="uploadZone">
                        <div class="upload-icon">ğŸ“Š</div>
                        <h4>Drop CSV file here or click to browse</h4>
                        <input type="file" id="fileInput" accept=".csv" style="display: none;">
                        <button class="upload-button" onclick="document.getElementById('fileInput').click()">
                            Choose File
                        </button>
                    </div>
                    
                    <div id="fileInfo" style="display: none;">
                        <h4 id="fileName"></h4>
                        <div class="form-group">
                            <label>Data Source Name:</label>
                            <input type="text" id="sourceName" placeholder="Enter name">
                        </div>
                        <button class="process-button" id="processButton">
                            ğŸš€ Process Data
                        </button>
                    </div>
                </div>

                <div id="dataPreview" class="content-card" style="display: none;">
                    <h3>ğŸ‘ï¸ Data Preview</h3>
                    <div id="dataTable"></div>
                </div>
            </div>

            <!-- Analysis Page -->
            <div class="page" id="analysis" style="display: none;">
                <div class="page-header">
                    <h2>ğŸ§  AI Analysis</h2>
                    <p>AI-powered pattern recognition and insights</p>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <h3>ğŸ” Pattern Analysis</h3>
                        <button class="analysis-button" id="patternAnalysisBtn">
                            Discover Patterns
                        </button>
                        <div id="patternResults"></div>
                    </div>

                    <div class="content-card">
                        <h3>ğŸš¨ Anomaly Detection</h3>
                        <div class="form-group">
                            <label>Sensitivity:</label>
                            <input type="range" id="contaminationSlider" min="0.01" max="0.3" step="0.01" value="0.1">
                            <span id="contaminationValue">0.1</span>
                        </div>
                        <button class="analysis-button" id="anomalyDetectionBtn">
                            Detect Anomalies
                        </button>
                        <div id="anomalyResults"></div>
                    </div>
                    <div class="content-card">
                         <h3>ğŸ”— Causal Analysis</h3>
                         <div class="form-group">
                              <label>Treatment Variable:</label>
                              <select id="treatmentColumn">
                                 <option value="">Choose column...</option>
                              </select>
                          </div>
                          <div class="form-group">
                              <label>Outcome Variable:</label>
                              <select id="outcomeColumn">
                                  <option value="">Choose column...</option>
                              </select>
                          </div>
                          <button class="analysis-button" id="causalAnalysisBtn">
                              Analyze Causality
                          </button>
                          <div id="causalResults"></div>
                      </div>
                </div>
            </div>

            <!-- Knowledge Graph Page -->
            <div class="page" id="ontology" style="display: none;">
                <div class="page-header">
                    <h2>ğŸ”— Knowledge Graph</h2>
                    <p>Explore data relationships and ontology</p>
                </div>

                <div class="content-card">
                    <h3>ğŸŒ Graph Visualization</h3>
                    <div id="knowledgeGraph" class="graph-container">
                        <div class="loading-message">Load data first to build knowledge graph</div>
                    </div>
                </div>

                <div class="content-card">
                    <h3>ğŸ” Query Ontology</h3>
                    <div class="query-section">
                        <input type="text" id="ontologyQuery" placeholder="Ask about your data structure...">
                        <button id="queryBtn">Query</button>
                    </div>
                    <div id="queryResults"></div>
                </div>
            </div>

            <!-- Simulations Page -->
            <div class="page" id="simulations" style="display: none;">
                <div class="page-header">
                    <h2>ğŸ”® Simulations & Predictions</h2>
                    <p>Build models and run forecasts</p>
                </div>

                <div class="content-grid">
                    <div class="content-card">
                        <h3>ğŸ¤– Build AI Model</h3>
                        <div class="form-group">
                            <label>Target Variable:</label>
                            <select id="targetColumn">
                                <option value="">Choose column...</option>
                            </select>
                        </div>
                        <button class="model-button" id="buildModelBtn">
                            ğŸ—ï¸ Build Model
                        </button>
                        <div id="modelResults"></div>
                    </div>

                    <div class="content-card">
                        <h3>ğŸ“ˆ Forecasting</h3>
                        <div class="form-group">
                            <label>Forecast Periods:</label>
                            <input type="number" id="forecastPeriods" value="30" min="1" max="365">
                        </div>
                        <button class="forecast-button" id="forecastBtn" disabled>
                            ğŸ”® Generate Forecast
                        </button>
                        <div id="forecastResults"></div>
                    </div>
                </div>

                <div class="content-card">
                    <h3>ğŸ­ What-If Analysis</h3>
                    <div id="whatIfControls">
                        <div class="loading-message">Build a model first</div>
                    </div>
                    <div id="scenarioResults"></div>
                </div>

                <div id="simulationCharts" class="content-card" style="display: none;">
                    <h3>ğŸ“Š Results</h3>
                    <div id="simulationPlot"></div>
                </div>
            </div>

            <!-- Chat Page -->
            <div class="page" id="chat" style="display: none;">
                <div class="page-header">
                    <h2>ğŸ’¬ AI Chat</h2>
                    <p>Chat with your data using natural language</p>
                </div>

                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="chat-message assistant">
                            <div class="message-avatar">ğŸ¤–</div>
                            <div class="message-content">
                                Hello! I'm your AI assistant. Upload some data and I can help you analyze it, find patterns, and answer questions about your digital twin.
                            </div>
                        </div>
                    </div>

                    <div class="chat-input-container">
                        <div class="chat-input-wrapper">
                            <input type="text" id="chatInput" placeholder="Ask me anything about your data...">
                            <button id="chatSendBtn">ğŸ“¤</button>
                        </div>
                        <div class="chat-suggestions">
                            <button class="suggestion-btn" onclick="sendSuggestion('What patterns do you see?')">
                                What patterns do you see?
                            </button>
                            <button class="suggestion-btn" onclick="sendSuggestion('Are there any anomalies?')">
                                Any anomalies?
                            </button>
                            <button class="suggestion-btn" onclick="sendSuggestion('Summarize my data')">
                                Summarize data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p id="loadingMessage">Processing...</p>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>